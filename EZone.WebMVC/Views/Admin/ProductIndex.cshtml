@*@model IEnumerable<EZone.Models.ProductListItem>*@
@model EZone.Models.Home.HomeIndexViewModel

@using PagedList;
@using PagedList.Mvc;

@{
    ViewBag.Title = "ProductIndex";
    //Layout = "~/Views/Shared/_AdminLayout.cshtml";


}


<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="~content/bootstrap.css" rel="stylesheet" />

<link href="~/Content/alertifyjs/alertify.min.css" rel="stylesheet" />
<link href="~/Content/alertifyjs/themes/default.min.css" rel="stylesheet" />


<div class="container" style="margin-top:5%">
    @*@using (Html.BeginForm("ProductIndex", "Admin", FormMethod.Get))
        {

            @Html.TextBox("searching")<input type="submit" value="Search" placeholder="Enter products" /><i class="glyphicon glyphicon-search"></i>

        }*@
    <div class="container">
        @*<div class="form-group">
                <div class="form-group">
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                        <input type="text" id="Search" placeholder="Search" class="form-control" />
                    </div>
                </div>
            </div>*@
        @*@Html.TextBox("Search")<input type="submit" id="SearchBtn" value="Search" /><br /><br />*@

        <form method="post">
            <div class="olSearch fr">
                <input type="text" name="search" placeholder="Enter products or category" class="inputComn form-control" />
                <div class="searchIcon">
                    <button type="submit" class="searchBtn">
                        <img style="height:25px; width:25px " src="~/Images/search.png" />
                    </button>
                </div>
            </div>
        </form>
    </div>


    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">Product List <a href="../Admin/AddProduct" class="btn btn-info pull-right fa fa-plus"> Add New</a></h6>
    </div>

    <br /><br />

    <table class="table table-striped">
        <thead>
            <tr class="btn-primary">
                @*<th>No.</th>*@
                <th>Category ID</th>
                @*<th>Category Name</th>*@
                <th>Product Name</th>
                <th>In Stock</th>
                <th>Price</th>
                <th>Action</th>

            </tr>
        </thead>
        <tbody>
            @*@if (Model.Count == 0)
                {
                    <tr>
                        <td colspan="3" style="color:red">
                            Not Found
                        </td>
                    </tr>
                }
                else
                {*@
            @foreach (var item in Model.ListOfProducts)
            {
                <tr class="Search">
                    @*<td>@(Model.IndexOf(item)+1)</td>*@
                    <td>
                        @item.CategoryId
                    </td>
                    @*<td>
                        @item.Category.CategoryName
                    </td>*@
                    <td>
                        @item.ProductName
                    </td>
                    <td>
                        @item.Quantity
                    </td>
                    <td>
                        $ @item.Price
                    </td>

                    <td>
                        <a href="@Url.Action("EditProduct", "Admin", new { id = item.ProductId })" class="btn btn-success">Edit</a>
                        <a href="@Url.Action("ProductDetails", "Admin", new { id = item.ProductId })" class="btn btn-primary">View</a>
                        @*<a href="@Url.Action("ProductDelete", "Admin", new { id = item.ProductId })" class="btn btn-danger">Delete</a>*@
                        <a onclick="Delete(@item.ProductId)" class="btn btn-danger">Delete</a>

                    </td>

                </tr>

            }






        </tbody>

    </table>

</div>
<div class="container">
    <br />
    @Html.PagedListPager(Model.ListOfProducts, page => Url.Action("ProductIndex", new { page, search = Request.QueryString["search"] }), new PagedListRenderOptions() { Display = PagedListDisplayMode.IfNeeded, DisplayItemSliceAndTotal = true })

</div>

@section scripts{
    <script>
        $(function () {
            var successMessage = '@TempData["SuccessMessage"]'
            if (successMessage != '')
                alertify.success(successMessage);
        });

        function Delete(id) {
            alertify.confirm('Delete Alert', 'Are you sure you want to delete this product?', function () {
                window.location.href = '@Url.Action("Delete","Admin")/' + id;
            }, null);
         }
    </script>
}





